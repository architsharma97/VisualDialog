Last login: Tue Mar  7 23:11:09 on ttys000
VisualDialog$ssh archit@cseproj148.cse.iitk.ac.in
archit@cseproj148.cse.iitk.ac.in's password: 
Welcome to Ubuntu 14.04.5 LTS (GNU/Linux 3.13.0-95-generic x86_64)

 * Documentation:  https://help.ubuntu.com/

Usage Policy :
-------------------------------------------------------------------
Please refrain from using both GPUs for training processes
Any such jobs will be killed
If both GPUs are required please , take permission prior to Usage
--------------------------------------------------------------------



234 packages can be updated.
155 updates are security updates.

Last login: Mon Mar  6 20:47:00 2017 from 172.27.30.167
archit@cseproj148:~$ cd VisualDialog/
larchit@cseproj148:~/VisualDialog$ ls
Data  Models  README.md  Scripts  init.sh
archit@cseproj148:~/VisualDialog$ git pull
Username for 'https://github.com': archithsharma97
Password for 'https://archithsharma97@github.com': 
remote: Invalid username or password.
fatal: Authentication failed for 'https://github.com/architsharma97/VisualDialog.git/'
archit@cseproj148:~/VisualDialog$ git pull
Username for 'https://github.com': architsharma97
Password for 'https://architsharma97@github.com': 
remote: Counting objects: 8, done.
remote: Compressing objects: 100% (3/3), done.
remote: Total 8 (delta 5), reused 8 (delta 5), pack-reused 0
Unpacking objects: 100% (8/8), done.
From https://github.com/architsharma97/VisualDialog
   ec6723a..781aa57  master     -> origin/master
Updating ec6723a..781aa57
Fast-forward
 Scripts/.DS_Store                                | Bin 6148 -> 6148 bytes
 Scripts/LateFusionEncoder/.DS_Store              | Bin 6148 -> 6148 bytes
 Scripts/LateFusionEncoder/late_fusion_encoder.py |  24 ++++++++++-------------
 Scripts/minibatch.py                             |   9 +++++++++
 4 files changed, 19 insertions(+), 14 deletions(-)
archit@cseproj148:~/VisualDialog$ cd Scripts/
archit@cseproj148:~/VisualDialog/Scripts$ ls
LateFusionEncoder  minibatch.py   preprocess.pyc	utils.py
adam.py		   minibatch.pyc  preprocess_utils.py	utils.pyc
adam.pyc	   preprocess.py  preprocess_utils.pyc
archit@cseproj148:~/VisualDialog/Scripts$ LC_ALL=C THEANO_FLAGS='device=gpu' python LateFusionEncoder/late_fusion_encoder.py 
  File "LateFusionEncoder/late_fusion_encoder.py", line 264
    
     ^
IndentationError: expected an indented block
archit@cseproj148:~/VisualDialog/Scripts$ cd LateFusionEncoder/
archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ ls
basic_layers.py  basic_layers.pyc  late_fusion_encoder.py
archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ python late_fusion_encoder.py 
  File "late_fusion_encoder.py", line 264
    
     ^
IndentationError: expected an indented block
archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ git pull
Username for 'https://github.com': architsharma97
Password for 'https://architsharma97@github.com': 
remote: Counting objects: 5, done.
remote: Compressing objects: 100% (1/1), done.
remote: Total 5 (delta 4), reused 5 (delta 4), pack-reused 0
Unpacking objects: 100% (5/5), done.
From https://github.com/architsharma97/VisualDialog
   781aa57..abb843b  master     -> origin/master
Updating 781aa57..abb843b
Fast-forward
 Scripts/LateFusionEncoder/late_fusion_encoder.py | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)
archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ clear

archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ ls
basic_layers.py  basic_layers.pyc  late_fusion_encoder.py
archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ LC_ALL=C THEANO_FLAGS='device=gpu' python late_fusion_encoder.py

Using gpu device 1: GeForce GTX TITAN X (CNMeM is disabled, cuDNN 5005)
Using TensorFlow backend.
I tensorflow/stream_executor/dso_loader.cc:125] successfully opened CUDA library libcublas.so.7.5 locally
I tensorflow/stream_executor/dso_loader.cc:125] successfully opened CUDA library libcudnn.so.5 locally
I tensorflow/stream_executor/dso_loader.cc:125] successfully opened CUDA library libcufft.so.7.5 locally
I tensorflow/stream_executor/dso_loader.cc:125] successfully opened CUDA library libcuda.so.1 locally
I tensorflow/stream_executor/dso_loader.cc:125] successfully opened CUDA library libcurand.so.7.5 locally
Initializing constants
Loading embedding matrix
Loading dictionaries
Testing minibatches
Loading JSON data file from split: Train
Preprocessing the dataset
Loading dictionaries
Constructing data for Train split
Getting map from MS COCO IDs to VGG16 features
Building feature matrix for given images
Traceback (most recent call last):
  File "late_fusion_encoder.py", line 83, in <module>
    train_data = minibatch.data(preprocess(DATA_DIR, load_dict=load_dict, load_embedding_matrix=load_embedding_data, save_data=False))
TypeError: __init__() takes at least 5 arguments (2 given)
archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ 
archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ clear
ls

archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ ls
basic_layers.py  basic_layers.pyc  late_fusion_encoder.py
archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ git pull
Username for 'https://github.com': architsharma97
Password for 'https://architsharma97@github.com': 
remote: Counting objects: 6, done.
remote: Compressing objects: 100% (1/1), done.
remote: Total 6 (delta 5), reused 6 (delta 5), pack-reused 0
Unpacking objects: 100% (6/6), done.
From https://github.com/architsharma97/VisualDialog
   abb843b..e348a59  master     -> origin/master
Updating abb843b..e348a59
Fast-forward
 Scripts/LateFusionEncoder/late_fusion_encoder.py | 12 ++++++++++--
 Scripts/minibatch.py                             |  4 ----
 2 files changed, 10 insertions(+), 6 deletions(-)
archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ git pull
Username for 'https://github.com': architsharma97
Password for 'https://architsharma97@github.com': 
remote: Counting objects: 5, done.
remote: Compressing objects: 100% (1/1), done.
remote: Total 5 (delta 4), reused 5 (delta 4), pack-reused 0
Unpacking objects: 100% (5/5), done.
From https://github.com/architsharma97/VisualDialog
   e348a59..65b006f  master     -> origin/master
Updating e348a59..65b006f
Fast-forward
 Scripts/LateFusionEncoder/late_fusion_encoder.py | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)
archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ clear

archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ ls
basic_layers.py  basic_layers.pyc  late_fusion_encoder.py
archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ LC_ALL=C THEANO_FLAGS='device=gpu' python late_fusion_encoder.py 
Using gpu device 1: GeForce GTX TITAN X (CNMeM is disabled, cuDNN 5005)
Using TensorFlow backend.
I tensorflow/stream_executor/dso_loader.cc:125] successfully opened CUDA library libcublas.so.7.5 locally
I tensorflow/stream_executor/dso_loader.cc:125] successfully opened CUDA library libcudnn.so.5 locally
I tensorflow/stream_executor/dso_loader.cc:125] successfully opened CUDA library libcufft.so.7.5 locally
I tensorflow/stream_executor/dso_loader.cc:125] successfully opened CUDA library libcuda.so.1 locally
I tensorflow/stream_executor/dso_loader.cc:125] successfully opened CUDA library libcurand.so.7.5 locally
Initializing constants
Loading embedding matrix
Loading dictionaries
Preprocessing data
Loading JSON data file from split: Train
Preprocessing the dataset
Loading dictionaries
Constructing data for Train split
Getting map from MS COCO IDs to VGG16 features
Building feature matrix for given images
Shape of image features:  (50729, 4096)
Shape of questions_tensor:  (507290,)
Shape of answers_tensor:  (558019,)
Shape of answers_tokens_idx:  (507290,)
Testing minibatches
Batch Size: 128
Counts for questions
3 : 2112
4 : 13858
5 : 86828
6 : 177696
7 : 111952
8 : 59101
9 : 28483
10 : 12438
11 : 7356
12 : 3341
13 : 1737
14 : 913
15 : 558
16 : 322
17 : 191
18 : 149
19 : 85
20 : 58
21 : 43
22 : 19
23 : 11
24 : 5
25 : 4
26 : 7
27 : 3
28 : 6
29 : 6
30 : 2
34 : 1
35 : 1
36 : 2
48 : 1
54 : 1
Counts for history
9 : 211
10 : 2495
11 : 8804
12 : 10732
13 : 9802
14 : 7416
15 : 6072
16 : 5949
17 : 6560
18 : 6884
19 : 6927
20 : 6941
21 : 6845
22 : 6764
23 : 6706
24 : 6640
25 : 6727
26 : 6779
27 : 6568
28 : 6739
29 : 6606
30 : 6709
31 : 6614
32 : 6595
33 : 6795
34 : 6483
35 : 6644
36 : 6554
37 : 6609
38 : 6697
39 : 6597
40 : 6606
41 : 6571
42 : 6591
43 : 6633
44 : 6617
45 : 6684
46 : 6514
47 : 6545
48 : 6652
49 : 6694
50 : 6674
51 : 6533
52 : 6622
53 : 6477
54 : 6587
55 : 6544
56 : 6542
57 : 6568
58 : 6543
59 : 6366
60 : 6362
61 : 6256
62 : 6264
63 : 6111
64 : 5982
65 : 5913
66 : 5723
67 : 5628
68 : 5449
69 : 5372
70 : 5089
71 : 5024
72 : 4917
73 : 4707
74 : 4554
75 : 4283
76 : 4185
77 : 3935
78 : 3805
79 : 3715
80 : 3469
81 : 3373
82 : 3193
83 : 3067
84 : 2899
85 : 2740
86 : 2623
87 : 2508
88 : 2401
89 : 2359
90 : 2177
91 : 2094
92 : 1856
93 : 1800
94 : 1720
95 : 1646
96 : 1597
97 : 1475
98 : 1448
99 : 1310
100 : 1261
101 : 1208
102 : 1111
103 : 1031
104 : 938
105 : 989
106 : 869
107 : 840
108 : 811
109 : 745
110 : 686
111 : 621
112 : 606
113 : 602
114 : 568
115 : 519
116 : 490
117 : 437
118 : 453
119 : 416
120 : 345
121 : 379
122 : 299
123 : 274
124 : 297
125 : 306
126 : 274
127 : 254
128 : 231
129 : 219
130 : 196
131 : 177
132 : 185
133 : 162
134 : 161
135 : 134
136 : 121
137 : 137
138 : 117
139 : 97
140 : 104
141 : 112
142 : 76
143 : 81
144 : 91
145 : 69
146 : 83
147 : 58
148 : 65
149 : 53
150 : 36
151 : 48
152 : 45
153 : 44
154 : 32
155 : 50
156 : 32
157 : 36
158 : 30
159 : 35
160 : 27
161 : 23
162 : 19
163 : 32
164 : 27
165 : 18
166 : 24
167 : 17
168 : 14
169 : 16
170 : 12
171 : 9
172 : 12
173 : 12
174 : 16
175 : 15
176 : 8
177 : 12
178 : 6
179 : 5
180 : 7
181 : 13
182 : 5
183 : 11
184 : 3
185 : 14
186 : 6
187 : 5
188 : 5
189 : 7
190 : 6
191 : 4
192 : 4
193 : 5
194 : 3
195 : 5
196 : 2
197 : 2
199 : 1
200 : 3
201 : 2
202 : 6
203 : 2
204 : 3
206 : 4
207 : 1
209 : 1
210 : 2
211 : 5
213 : 1
215 : 4
216 : 1
218 : 3
220 : 1
221 : 2
223 : 2
225 : 1
228 : 1
234 : 1
236 : 1
237 : 1
239 : 1
243 : 1
245 : 1
260 : 1
265 : 1
267 : 1
281 : 1
295 : 1
Initializating parameters for model
ff_W :  (5120, 512)
ff_b :  (512,)
lstm_q_1_W :  (300, 2048)
lstm_q_1_U :  (512, 2048)
lstm_q_1_b :  (2048,)
lstm_q_2_W :  (512, 2048)
lstm_q_2_U :  (512, 2048)
lstm_q_2_b :  (2048,)
lstm_h_1_W :  (300, 2048)
lstm_h_1_U :  (512, 2048)
lstm_h_1_b :  (2048,)
lstm_h_2_W :  (512, 2048)
lstm_h_2_U :  (512, 2048)
lstm_h_2_b :  (2048,)
lstm_d_1_W :  (300, 2048)
lstm_d_1_U :  (512, 2048)
lstm_d_1_b :  (2048,)
lstm_d_2_W :  (512, 1200)
lstm_d_2_U :  (300, 1200)
lstm_d_2_b :  (1200,)
Building encoder for the model
Building decoder
Building cost function
Constructing graph
Done!
Computing gradients
Setting up optimizer
Traceback (most recent call last):
  File "late_fusion_encoder.py", line 268, in <module>
    f_grad_shared, f_update = adam(lr, tparams, grads, inps, cost)
  File "../adam.py", line 40, in adam
    f_update = theano.function([lr], [], updates=updates, on_unused_input='ignore', profile=False)
  File "/usr/local/lib/python2.7/dist-packages/theano/compile/function.py", line 320, in function
    output_keys=output_keys)
  File "/usr/local/lib/python2.7/dist-packages/theano/compile/pfunc.py", line 442, in pfunc
    no_default_updates=no_default_updates)
  File "/usr/local/lib/python2.7/dist-packages/theano/compile/pfunc.py", line 207, in rebuild_collect_shared
    raise TypeError(err_msg, err_sug)
TypeError: ('An update must have the same type as the original shared variable (shared_var=<CudaNdarrayType(float32, matrix)>, shared_var.type=CudaNdarrayType(float32, matrix), update_val=Elemwise{add,no_inplace}.0, update_val.type=TensorType(float64, matrix)).', 'If the difference is related to the broadcast pattern, you can call the tensor.unbroadcast(var, axis_to_unbroadcast[, ...]) function to remove broadcastable dimensions.')
archit@cseproj148:~/VisualDialog/Scripts/LateFusionEncoder$ packet_write_wait: Connection to 172.27.21.148 port 22: Broken pipe
VisualDialog$
VisualDialog$
